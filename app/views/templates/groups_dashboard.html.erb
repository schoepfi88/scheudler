<section class="hidden-print">
  	<h1 class="page-header">
		<i class="fa <%= @group.icon %>"></i> 
		<%= @group.name + t(".page_header") %>
		
			<div class="btn-group pull-right">
			  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
				<i class="fa fa-gear"></i><span class="hidden-xs">Settings</span><span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="/#/groups_dashboard/<%= @group.id %>/invite"><i class="fa fa-plus"></i> Invite People</a></li>
				<% if @is_admin %>
					<li class="divider"></li>
					<li><a href="/#/groups_dashboard/<%= @group.id %>/settings"><i class="fa fa-gears"></i> Group Settings</a></li>
				<% end %>
			  </ul>
			</div>
	</h1>
</section>

<div class="row font-upscaling">
	<div class="col-lg-3 col-sm-6">
		<div class="panel panel-info clickable" ng-click="redirect_to_members(<%= @group.id %>)">
		  <div class="panel-heading">
			<div class="row">
			  <div class="col-xs-2">
				<i class="fa fa-group fa-4x"></i>
			  </div>
			  <div class="col-xs-10 text-right">
				<p class="announcement-text"><%=t(".members")%></p>
				<p class="announcement-heading"><%= @group.members.size %></p>
			  </div>
			</div>
		  </div>
		</div>
	</div>

	<div class="col-lg-3 col-sm-6">
		<div class="panel panel-warning clickable" ng-click="redirect_to_events(<%= @group.id %>)">
		  <div class="panel-heading">
			<div class="row">
			  <div class="col-xs-2">
				<i class="fa fa-trophy fa-4x"></i>
			  </div>
			  <div class="col-xs-10 text-right">
				<p class="announcement-text"><%=t(".events")%></p>
				<p class="announcement-heading"><%= "0" %></p>
			  </div>
			</div>
		  </div>
		</div>
	</div>

	<div class="col-lg-3 col-sm-6">
		<div class="panel panel-danger clickable" ng-click="redirect_to_calendar(<%= @group.id %>)">
		  <div class="panel-heading">
			<div class="row">
			  <div class="col-xs-2">
				<i class="fa fa-calendar fa-4x"></i>
			  </div>
			  <div class="col-xs-10 text-right">
				<p class="announcement-text"><%=t(".calendar")%></p>
				<p class="announcement-heading"><%= "0" %></p>
			  </div>
			</div>
		  </div>
		</div>
	</div>

	<div class="col-lg-3 col-sm-6">
		<div class="panel panel-success clickable" ng-click="redirect_to_statistic(<%= @group.id %>)">
		  <div class="panel-heading">
			<div class="row">
			  <div class="col-xs-2">
				<i class="fa fa-line-chart fa-4x"></i>
			  </div>
			  <div class="col-xs-10 text-right">
				<p class="announcement-text"><%=t(".statistic")%></p>
				<p class="announcement-heading"><%= "0" %></p>
			  </div>
			</div>
		  </div>
		</div>
	</div>
</div>

<div class="row" ng-controller="dashboardCtrl>
  <!-- Blog of group -->
  <div class="col-lg-4 col-xs-12 col-md-6" ng-repeat="group in mygroups track by $index">
    <div class="panel panel-default box-dashboard">
      <div class="panel-heading">
        <a class="modal-link" data-toggle="modal" data-target="#myModal" ng-click="getAllMessages(group.id, $index)">
          <span class="fa fa-rss"></span> 
          Blog of {{group.name}}
          <span class="badge pull-right">{{unreadMessages.unread[$index]}}</span>
        </a>
      </div>
      <!--messages of groups-->
      <div class="panel-body" id="message_body">
        <!-- read messages -->
        <div  class="panel panel-default inbox-dashboard" 
              ng-init="center_messages()" 
              ng-repeat="message in mymessages[$index] track by $index"
              ng-show="currentUserIsSender(message) || !currentlyRead(message, $parent.$index, $index, false)">
          <div class="panel-body inbox-dashboard">
            <div name="mes-pic" class="row center-row">
              <div class="col-lg-2 col-md-2 col-sm-1 col-xs-2 center">
                <div class="big-box">
                  <img class="img-circle" ng-src="{{message.image_path}}"/>
                </div>
              </div>
              <div name="mes-text" class="col-lg-7 col-md-7 col-sm-8 col-xs-7 uncenter">
                <div class="row">
                  <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                    <div class="mini-box message-name">
                      {{message.name}}:
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                    <div class="mini-box message-text">
                      {{message.text}}
                    </div>
                  </div>
                </div>
              </div>
              <div name="mes-time" class="col-lg-3 col-md-3 col-xs-3 center">
                <div class="big-box message-time pull-right">
                  {{parseTime(message.created_at)}}
                </div>
              </div>
            </div>
          </div>
        </div>
         <!-- unread messages -->
        <div  class="panel panel-default inbox-dashboard unread" 
              ng-init="center_messages()" 
              ng-repeat="message in mymessages[$index] track by $index"
              ng-show="!currentUserIsSender(message) && currentlyRead(message, $parent.$index, $index, false)">
          <div class="panel-body inbox-dashboard">
            <div name="mes-pic" class="row center-row">
              <div class="col-lg-2 col-md-2 col-sm-1 col-xs-2 center">
                <div class="big-box">
                  <img class="img-circle" ng-src="{{message.image_path}}"/>
                </div>
              </div>
              <div name="mes-text" class="col-lg-7 col-md-7 col-sm-8 col-xs-7 uncenter">
                <div class="row">
                  <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                    <div class="mini-box message-name">
                      {{message.name}}:
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                    <div class="mini-box message-text">
                      {{message.text}}
                    </div>
                  </div>
                </div>
              </div>
              <div name="mes-time" class="col-lg-3 col-md-3 col-xs-3 center">
                <div class="big-box message-time pull-right">
                  {{parseTime(message.created_at)}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="panel-footer">
        <form role="form" name="NewForm">
          <div class="input-group input-group-sm">
            <input  name="input-text"
                    type="text" 
                    class="form-control" 
                    placeholder="<%= t('.new_message') %>"
                    ng-model="group.text"
                    ng-disabled="!NewForm.$valid">
            <span class="input-group-btn">
              <button class=" btn btn-primary btn-input" ng-click="send_message(group.id, group.text, $index)" type="submit">
                <span class="glyphicon glyphicon-ok"></span> 
                <%= t('.send') %>
              </button>
            </span>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="dashboardCtrl">
  <div class="modal-dialog" style="overflow-y: scroll; max-height:85%;  margin-top: 50px; margin-bottom:50px;">
    <div class="modal-content">
      <div class="modal-header">
        <button style="margin-top: 5px;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div class="modal-title" id="myModalLabel"><span class="fa fa-rss"></span> Blog of {{selectedGroup.name}} <span class="badge pull-right" style="margin-right: 15px;">{{unreadMessages.unread[selectedGroup.index]}}</span></div>

      </div>
      <div class="modal-body" id="scrollarea">
        <div class="panel panel-default box-dashboard">
          <!--messages of groups-->
          <div class="panel-body" id="message_body">
            <!-- read messages -->
            <div  class="panel panel-default inbox-dashboard" 
                  ng-init="center_messages()" 
                  ng-repeat="message in selectedGroupMessages track by $index"
                  ng-show="currentUserIsSender(message) || !currentlyRead(message, selectedGroup.index, $index, true)">
              <div class="panel-body inbox-dashboard">
                <div name="mes-pic" class="row center-row">
                  <div class="col-lg-2 col-md-2 col-sm-1 col-xs-2 center">
                    <div class="big-box">
                      <img class="img-circle" ng-src="{{message.image_path}}"/>
                    </div>
                  </div>
                  <div name="mes-text" class="col-lg-7 col-md-7 col-sm-8 col-xs-7 uncenter">
                    <div class="row">
                      <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                        <div class="mini-box message-name">
                          {{message.name}}:
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                        <div class="mini-box message-text">
                          {{message.text}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div name="mes-time" class="col-lg-3 col-md-3 col-xs-3 center">
                    <div class="big-box message-time pull-right">
                      {{parseTime(message.created_at)}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
             <!-- unread messages -->
            <div  class="panel panel-default inbox-dashboard unread" 
                  ng-init="center_messages()" 
                  ng-repeat="message in selectedGroupMessages track by $index"
                  ng-show="!currentUserIsSender(message) && currentlyRead(message, selectedGroup.index, $index, true)">
              <div class="panel-body inbox-dashboard">
                <div name="mes-pic" class="row center-row">
                  <div class="col-lg-2 col-md-2 col-sm-1 col-xs-2 center">
                    <div class="big-box">
                      <img class="img-circle" ng-src="{{message.image_path}}"/>
                    </div>
                  </div>
                  <div name="mes-text" class="col-lg-7 col-md-7 col-sm-8 col-xs-7 uncenter">
                    <div class="row">
                      <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                        <div class="mini-box message-name">
                          {{message.name}}:
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-xs-12 uncenter">
                        <div class="mini-box message-text">
                          {{message.text}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div name="mes-time" class="col-lg-3 col-md-3 col-xs-3 center">
                    <div class="big-box message-time pull-right">
                      {{parseTime(message.created_at)}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="panel-footer">
            <form role="form" name="NewForm">
              <div class="input-group input-group-sm">
                <input  name="input-text"
                        type="text" 
                        class="form-control" 
                        placeholder="<%= t('.new_message') %>"
                        ng-model="selectedGroup.text"
                        ng-disabled="!NewForm.$valid">
                <span class="input-group-btn">
                  <button class=" btn btn-primary btn-input" ng-click="send_message_modal(selectedGroup.id, selectedGroup.text, selectedGroup.index)" type="submit">
                    <span class="glyphicon glyphicon-ok"></span> 
                    <%= t('.send') %>
                  </button>
                </span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--<section class="hidden-print">
  	<h2 class="page-header">
		<i class="fa fa-newspaper-o"></i> 
		<%= t(".news") %>
	</h2>
</section>-->
